import{r as n,a as oe,j as e,L as ne,s as ie}from"./index-g3GU5JoN.js";import{r as se,l as le}from"./auth-D6vILSCL.js";import{s as ae}from"./geocode-Cak2rTCs.js";import"./http-vazCWv24.js";const G=["Account","Role","Location"];function de(o){if(o.length===0)return{label:"",color:"#e0e0e0",width:"0%"};let s=0;return o.length>=6&&s++,o.length>=10&&s++,/[A-Z]/.test(o)&&s++,/[0-9]/.test(o)&&s++,/[^A-Za-z0-9]/.test(o)&&s++,s<=1?{label:"Weak",color:"#e53935",width:"20%"}:s===2?{label:"Fair",color:"#fb8c00",width:"40%"}:s===3?{label:"Good",color:"#fdd835",width:"60%"}:s===4?{label:"Strong",color:"#43a047",width:"80%"}:{label:"Excellent",color:"#1b5e20",width:"100%"}}function fe(){const[o,s]=n.useState(0),[p,H]=n.useState(""),[d,M]=n.useState(""),[l,Y]=n.useState(""),[c,q]=n.useState(""),[i,R]=n.useState("veteran"),[x,W]=n.useState(null),[m,A]=n.useState(null),[V,b]=n.useState(""),[g,B]=n.useState(""),[j,T]=n.useState([]),[Z,E]=n.useState(!1),[S,L]=n.useState(!1),[I,P]=n.useState(""),[F,_]=n.useState(""),[v,N]=n.useState(!1),[w,J]=n.useState(!1),O=oe(),y=de(l),k=c.length===0||l===c;function C(){return o===0?p.trim().length>=2&&d.includes("@")&&l.length>=6&&l===c:!0}async function Q(t){b(t),E(!0);const r=await ae(t);T(r),E(!1)}function $(t){W(t.lat),A(t.lon),B(t.display_name),b(t.display_name),T([])}async function K(){L(!0),P("");try{const t=await fetch("https://ipapi.co/json/");if(!t.ok)throw new Error("IP geolocation service unavailable");const r=await t.json();if(r.latitude&&r.longitude){W(r.latitude),A(r.longitude);const a=[r.city,r.region,r.country_name].filter(Boolean).join(", ");B(a||`${r.latitude.toFixed(4)}, ${r.longitude.toFixed(4)}`),b(a||"")}else throw new Error("Could not determine location")}catch(t){P(t instanceof Error?t.message:"Auto-detect failed. Please type your address above.")}finally{L(!1)}}async function U(){_(""),N(!0);try{await se({email:d,password:l,full_name:p,role:i,latitude:x??void 0,longitude:m??void 0});const r=await le({email:d,password:l});ie(r.access_token),O("/",{replace:!0})}catch(t){_(t instanceof Error?t.message:"Registration failed")}finally{N(!1)}}const X={minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0d47a1 0%, #1565c0 30%, #1e88e5 60%, #42a5f5 100%)",padding:"2rem 1rem"},ee={width:"100%",maxWidth:480,backgroundColor:"#fff",borderRadius:16,boxShadow:"0 20px 60px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.1)",overflow:"hidden"},te={padding:"2rem 2rem 1.5rem",background:"linear-gradient(135deg, #0d47a1, #1976d2)",color:"#fff",textAlign:"center"},re={padding:"1.5rem 2rem 2rem"},h={width:"100%",padding:"12px 14px",border:"2px solid #e0e0e0",borderRadius:10,fontSize:"0.95rem",transition:"border-color 0.2s, box-shadow 0.2s",outline:"none",backgroundColor:"#fafafa",boxSizing:"border-box"},u={display:"block",marginBottom:6,fontWeight:600,fontSize:"0.85rem",color:"#424242",letterSpacing:"0.02em"},f={marginBottom:"1.25rem"},z={width:"100%",padding:"14px 24px",background:"linear-gradient(135deg, #1565c0, #1976d2)",color:"#fff",border:"none",borderRadius:10,fontSize:"1rem",fontWeight:600,cursor:"pointer",letterSpacing:"0.03em",transition:"transform 0.15s, box-shadow 0.15s",boxShadow:"0 4px 14px rgba(25,118,210,0.4)"},D={width:"100%",padding:"12px 24px",background:"transparent",color:"#1976d2",border:"2px solid #1976d2",borderRadius:10,fontSize:"0.95rem",fontWeight:600,cursor:"pointer",transition:"background 0.2s"};return e.jsx("div",{style:X,children:e.jsxs("div",{style:ee,children:[e.jsxs("div",{style:te,children:[e.jsx("div",{style:{fontSize:"2rem",fontWeight:800,marginBottom:4,letterSpacing:"-0.02em"},children:"VetBridge"}),e.jsx("p",{style:{margin:0,opacity:.85,fontSize:"0.9rem"},children:"Join the veteran support network"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:8,marginTop:20},children:G.map((t,r)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:32,height:32,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:700,backgroundColor:r<=o?"rgba(255,255,255,0.95)":"rgba(255,255,255,0.2)",color:r<=o?"#1565c0":"rgba(255,255,255,0.6)",transition:"all 0.3s"},children:r<o?"âœ“":r+1}),e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:r<=o?"#fff":"rgba(255,255,255,0.5)"},children:t}),r<G.length-1&&e.jsx("div",{style:{width:24,height:2,backgroundColor:r<o?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.2)",borderRadius:1}})]},t))})]}),e.jsxs("div",{style:re,children:[o===0&&e.jsxs("div",{children:[e.jsx("h2",{style:{margin:"0 0 1.25rem",fontSize:"1.3rem",fontWeight:700,color:"#212121"},children:"Create your account"}),e.jsxs("div",{style:f,children:[e.jsx("label",{style:u,children:"Full Name"}),e.jsx("input",{type:"text",value:p,onChange:t=>H(t.target.value),placeholder:"John Doe",required:!0,style:h})]}),e.jsxs("div",{style:f,children:[e.jsx("label",{style:u,children:"Email Address"}),e.jsx("input",{type:"email",value:d,onChange:t=>M(t.target.value),placeholder:"john@example.com",required:!0,autoComplete:"email",style:h})]}),e.jsxs("div",{style:f,children:[e.jsx("label",{style:u,children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:w?"text":"password",value:l,onChange:t=>Y(t.target.value),placeholder:"Min. 6 characters",required:!0,autoComplete:"new-password",style:{...h,paddingRight:48}}),e.jsx("button",{type:"button",onClick:()=>J(!w),style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"0.8rem",color:"#757575",fontWeight:600},children:w?"Hide":"Show"})]}),l.length>0&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{height:4,backgroundColor:"#e0e0e0",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:y.width,backgroundColor:y.color,borderRadius:2,transition:"width 0.3s, background-color 0.3s"}})}),e.jsx("span",{style:{fontSize:"0.75rem",color:y.color,fontWeight:600,marginTop:4,display:"inline-block"},children:y.label})]})]}),e.jsxs("div",{style:f,children:[e.jsx("label",{style:u,children:"Confirm Password"}),e.jsx("input",{type:"password",value:c,onChange:t=>q(t.target.value),placeholder:"Re-enter your password",required:!0,autoComplete:"new-password",style:{...h,borderColor:k?c.length>0&&k?"#43a047":"#e0e0e0":"#e53935"}}),!k&&e.jsx("span",{style:{fontSize:"0.75rem",color:"#e53935",marginTop:4,display:"inline-block"},children:"Passwords don't match"})]}),e.jsx("button",{type:"button",onClick:()=>s(1),disabled:!C(),style:{...z,opacity:C()?1:.5,cursor:C()?"pointer":"not-allowed"},children:"Continue"})]}),o===1&&e.jsxs("div",{children:[e.jsx("h2",{style:{margin:"0 0 0.5rem",fontSize:"1.3rem",fontWeight:700,color:"#212121"},children:"How will you use VetBridge?"}),e.jsx("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1.5rem"},children:"Choose your role in the community"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,marginBottom:"1.5rem"},children:[e.jsx("button",{type:"button",onClick:()=>R("veteran"),style:{padding:"1.25rem",border:i==="veteran"?"2px solid #1976d2":"2px solid #e0e0e0",borderRadius:12,backgroundColor:i==="veteran"?"#e3f2fd":"#fff",cursor:"pointer",textAlign:"left",transition:"all 0.2s",boxShadow:i==="veteran"?"0 4px 12px rgba(25,118,210,0.15)":"none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:12,background:i==="veteran"?"linear-gradient(135deg, #1565c0, #1976d2)":"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",flexShrink:0},children:e.jsx("span",{style:{filter:i!=="veteran"?"grayscale(1) opacity(0.5)":"none"},children:"â­"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.05rem",color:"#212121"},children:"I'm a Veteran"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:2},children:"Get matched with buddies, create check-ins, and send SOS alerts when you need support"})]}),i==="veteran"&&e.jsx("div",{style:{marginLeft:"auto",color:"#1976d2",fontSize:"1.2rem",fontWeight:700,flexShrink:0},children:"âœ“"})]})}),e.jsx("button",{type:"button",onClick:()=>R("buddy"),style:{padding:"1.25rem",border:i==="buddy"?"2px solid #2e7d32":"2px solid #e0e0e0",borderRadius:12,backgroundColor:i==="buddy"?"#e8f5e9":"#fff",cursor:"pointer",textAlign:"left",transition:"all 0.2s",boxShadow:i==="buddy"?"0 4px 12px rgba(46,125,50,0.15)":"none"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[e.jsx("div",{style:{width:48,height:48,borderRadius:12,background:i==="buddy"?"linear-gradient(135deg, #2e7d32, #43a047)":"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.5rem",flexShrink:0},children:e.jsx("span",{style:{filter:i!=="buddy"?"grayscale(1) opacity(0.5)":"none"},children:"ðŸ¤"})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,fontSize:"1.05rem",color:"#212121"},children:"I'm a Buddy"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#666",marginTop:2},children:"Support veterans by accepting invitations, responding to SOS alerts, and being there"})]}),i==="buddy"&&e.jsx("div",{style:{marginLeft:"auto",color:"#2e7d32",fontSize:"1.2rem",fontWeight:700,flexShrink:0},children:"âœ“"})]})})]}),e.jsxs("div",{style:{display:"flex",gap:10},children:[e.jsx("button",{type:"button",onClick:()=>s(0),style:{...D,width:"40%"},children:"Back"}),e.jsx("button",{type:"button",onClick:()=>s(2),style:{...z,width:"60%"},children:"Continue"})]})]}),o===2&&e.jsxs("div",{children:[e.jsx("h2",{style:{margin:"0 0 0.5rem",fontSize:"1.3rem",fontWeight:700,color:"#212121"},children:"Set your location"}),e.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",margin:"0 0 1.25rem"},children:["This helps match you with nearby ",i==="veteran"?"buddies":"veterans",". You can skip this and set it later."]}),e.jsxs("div",{style:f,children:[e.jsx("label",{style:u,children:"Search your city, ZIP code, or address"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"text",value:V,onChange:t=>Q(t.target.value),placeholder:"e.g. San Francisco, CA or 10001",style:{...h,borderColor:g?"#43a047":"#e0e0e0"}}),Z&&e.jsx("span",{style:{position:"absolute",right:14,top:"50%",transform:"translateY(-50%)",fontSize:"0.8rem",color:"#999"},children:"Searching..."})]}),j.length>0&&e.jsx("div",{style:{border:"1px solid #e0e0e0",borderRadius:8,marginTop:4,maxHeight:200,overflowY:"auto",backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:j.map((t,r)=>e.jsxs("button",{type:"button",onClick:()=>$(t),style:{display:"block",width:"100%",padding:"10px 14px",border:"none",borderBottom:r<j.length-1?"1px solid #f0f0f0":"none",backgroundColor:"#fff",textAlign:"left",cursor:"pointer",fontSize:"0.85rem",color:"#333",transition:"background 0.15s"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="#fff"},children:[e.jsx("span",{style:{fontWeight:500},children:t.display_name.split(",")[0]}),e.jsx("span",{style:{color:"#888",fontSize:"0.8rem"},children:t.display_name.includes(",")?", "+t.display_name.split(",").slice(1,3).join(",").trim():""})]},r))})]}),g&&x&&m&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#e8f5e9",borderRadius:10,marginBottom:"1rem",border:"1px solid #a5d6a7"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"âœ…"}),e.jsx("span",{style:{fontWeight:600,color:"#2e7d32",fontSize:"0.9rem"},children:"Location set"})]}),e.jsx("p",{style:{margin:0,fontSize:"0.85rem",color:"#555"},children:g}),e.jsxs("p",{style:{margin:"4px 0 0",fontSize:"0.75rem",color:"#888"},children:["Coordinates: ",x.toFixed(4),", ",m.toFixed(4)]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,margin:"0.75rem 0"},children:[e.jsx("div",{style:{flex:1,height:1,backgroundColor:"#e0e0e0"}}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#999",fontWeight:500},children:"or"}),e.jsx("div",{style:{flex:1,height:1,backgroundColor:"#e0e0e0"}})]}),e.jsxs("button",{type:"button",onClick:K,disabled:S,style:{width:"100%",padding:"10px 16px",background:"#fff",border:"2px solid #e0e0e0",borderRadius:10,cursor:S?"default":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,fontSize:"0.9rem",color:"#555",marginBottom:"0.75rem",transition:"border-color 0.2s"},children:[e.jsx("span",{style:{fontSize:"1.1rem"},children:"ðŸ“"}),S?"Detecting location...":"Auto-detect my location"]}),I&&e.jsx("p",{style:{fontSize:"0.8rem",color:"#e65100",margin:"0 0 1rem",padding:"8px 12px",backgroundColor:"#fff3e0",borderRadius:6,border:"1px solid #ffe0b2"},children:I}),F&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#ffebee",border:"1px solid #ef9a9a",borderRadius:8,marginBottom:"1rem"},children:e.jsx("p",{style:{color:"#c62828",margin:0,fontSize:"0.9rem"},children:F})}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f5f5f5",borderRadius:10,marginBottom:"1.5rem",fontSize:"0.85rem"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8,color:"#424242"},children:"Account Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px 16px"},children:[e.jsx("span",{style:{color:"#888"},children:"Name"}),e.jsx("span",{style:{fontWeight:500},children:p}),e.jsx("span",{style:{color:"#888"},children:"Email"}),e.jsx("span",{style:{fontWeight:500},children:d}),e.jsx("span",{style:{color:"#888"},children:"Role"}),e.jsx("span",{style:{fontWeight:500,textTransform:"capitalize"},children:i}),e.jsx("span",{style:{color:"#888"},children:"Location"}),e.jsx("span",{style:{fontWeight:500},children:g?g.split(",").slice(0,2).join(", "):"Not set (optional)"})]})]}),e.jsxs("div",{style:{display:"flex",gap:10},children:[e.jsx("button",{type:"button",onClick:()=>s(1),style:{...D,width:"35%"},children:"Back"}),e.jsx("button",{type:"button",onClick:U,disabled:v,style:{...z,width:"65%",opacity:v?.7:1,background:"linear-gradient(135deg, #1565c0, #0d47a1)"},children:v?"Creating Account...":"Create Account"})]})]}),e.jsx("div",{style:{textAlign:"center",marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid #f0f0f0"},children:e.jsxs("span",{style:{color:"#888",fontSize:"0.9rem"},children:["Already have an account?"," ",e.jsx(ne,{to:"/login",style:{color:"#1976d2",fontWeight:600,textDecoration:"none"},children:"Sign in"})]})})]})]})})}export{fe as default};
