import{g as H,a as z,p as K,j as e,r as a,c as Q,b as Z,u as q,d as W,e as X,f as U}from"./index-BjFXoSI1.js";import{g as ee,a as te}from"./auth-CXLfW215.js";import{s as se}from"./geocode-Cak2rTCs.js";async function ae(s){const t=H();if(!t)throw new Error("Not authenticated");return K("/checkins",s,t)}async function ne(s=30){const t=H();if(!t)throw new Error("Not authenticated");return z(`/checkins/me?limit=${s}`,t)}const ie={1:"Very low",2:"Low",3:"Okay",4:"Good",5:"Great"};function le(s){const t=new Date(s),i=new Date().toDateString(),h=t.toDateString();return i===h?`Today ${t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:t.toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function ce(s){return s<=2?"mood-score-low":s===3?"mood-score-mid":"mood-score-high"}function oe({checkin:s}){return e.jsxs("div",{className:"card card-hover mb-3",children:[e.jsxs("div",{className:"flex-between mb-3",style:{flexWrap:"wrap",gap:"4px"},children:[e.jsxs("div",{className:"flex-center gap-sm",children:[e.jsx("span",{className:`mood-score-badge ${ce(s.mood_score)}`,children:s.mood_score}),e.jsx("span",{className:"heading-sm",children:ie[s.mood_score]??"Unknown"})]}),e.jsx("span",{className:"text-muted text-xs",children:le(s.created_at)})]}),s.tags.length>0&&e.jsx("div",{className:"flex-center gap-xs mb-3",style:{flexWrap:"wrap",justifyContent:"flex-start"},children:s.tags.map(t=>e.jsx("span",{className:"badge",children:t},t))}),s.note&&e.jsx("p",{className:"text-secondary text-sm mb-2",children:s.note}),s.wants_company&&e.jsx("div",{className:"flex-center gap-xs mt-2",style:{justifyContent:"flex-start"},children:e.jsx("span",{className:"badge badge-info",children:"Wants company"})})]})}const re=[{value:1,label:"1 - Very low"},{value:2,label:"2 - Low"},{value:3,label:"3 - Okay"},{value:4,label:"4 - Good"},{value:5,label:"5 - Great"}];function de({onSubmitted:s,buddies:t,onSosCreated:d}){const[i,h]=a.useState(3),[g,x]=a.useState(""),[c,u]=a.useState(""),[S,C]=a.useState(!1),[N,y]=a.useState(!1),[p,o]=a.useState(null),[b,m]=a.useState(null),[f,D]=a.useState(!1),[L,T]=a.useState("MED"),[v,F]=a.useState(!1),[w,M]=a.useState(new Set);function I(l){M(E=>{const O=new Set(E);return O.has(l)?O.delete(l):O.add(l),O})}async function G(l){l.preventDefault(),o(null),m(null),y(!0),fetch("http://127.0.0.1:7242/ingest/ea529403-4157-4bb2-8989-ab1b42396ecc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"MoodCheckinForm.tsx:handleSubmit",message:"handleSubmit entry",data:{sendSos:f,moodScore:i,broadcast:v,selectedBuddyIdsSize:w.size,selectedBuddyIds:Array.from(w)},timestamp:Date.now(),hypothesisId:"H1"})}).catch(()=>{});try{const E=g.split(/[,\s]+/).map(_=>_.trim()).filter(Boolean),O={mood_score:i,tags:E,note:c.trim()||void 0,wants_company:S},J=await ae(O);if(fetch("http://127.0.0.1:7242/ingest/ea529403-4157-4bb2-8989-ab1b42396ecc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"MoodCheckinForm.tsx:createCheckin",message:"createCheckin success",data:{checkinId:J.id},timestamp:Date.now(),hypothesisId:"H5"})}).catch(()=>{}),f){const _={};v?_.broadcast=!0:w.size>0&&(_.buddy_ids=Array.from(w)),fetch("http://127.0.0.1:7242/ingest/ea529403-4157-4bb2-8989-ab1b42396ecc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"MoodCheckinForm.tsx:createManualSos",message:"before createManualSos",data:{sosOptions:JSON.stringify(_),severity:L},timestamp:Date.now(),hypothesisId:"H4"})}).catch(()=>{});try{const n=await Q(L,_);fetch("http://127.0.0.1:7242/ingest/ea529403-4157-4bb2-8989-ab1b42396ecc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"MoodCheckinForm.tsx:createManualSos",message:"createManualSos success",data:{alertId:n.id},timestamp:Date.now(),hypothesisId:"H1"})}).catch(()=>{}),d==null||d(n),m(`Check-in submitted + SOS #${n.id} sent!`)}catch(n){fetch("http://127.0.0.1:7242/ingest/ea529403-4157-4bb2-8989-ab1b42396ecc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"MoodCheckinForm.tsx:createManualSos",message:"createManualSos FAILED",data:{error:String(n)},timestamp:Date.now(),hypothesisId:"H1"})}).catch(()=>{}),m("Check-in submitted."),o(n instanceof Error?n.message:"Check-in OK but SOS failed")}}else m("Check-in submitted.");h(3),x(""),u(""),C(!1),D(!1),F(!1),M(new Set),s()}catch(E){o(E instanceof Error?E.message:"Failed to submit check-in")}finally{y(!1)}}return e.jsxs("form",{onSubmit:G,className:"card mb-6",children:[e.jsx("h3",{className:"heading-sm mb-4",children:"How are you feeling today?"}),e.jsx("div",{className:"divider mb-4"}),p&&e.jsx("div",{className:"alert alert-danger mb-4 text-sm",children:p}),b&&e.jsx("div",{className:"alert alert-success mb-4 text-sm",children:b}),e.jsxs("div",{className:"flex-col gap-md",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Mood (1-5)"}),e.jsx("select",{className:"select",value:i,onChange:l=>h(Number(l.target.value)),children:re.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Tags (comma-separated)"}),e.jsx("input",{type:"text",className:"input",value:g,onChange:l=>x(l.target.value),placeholder:"calm, hopeful, tired..."})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Note (optional)"}),e.jsx("textarea",{className:"textarea",value:c,onChange:l=>u(l.target.value),placeholder:"How are you doing?",rows:3})]}),e.jsxs("label",{className:"mood-company-checkbox",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:l=>C(l.target.checked)}),e.jsx("span",{className:"text-secondary text-sm",children:"I'd like company today"})]}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"form-section",children:[e.jsxs("label",{className:"mood-company-checkbox",style:{marginBottom:"0.5rem"},children:[e.jsx("input",{type:"checkbox",checked:f,onChange:l=>D(l.target.checked)}),e.jsx("span",{className:"text-sm",style:{fontWeight:600},children:"Send SOS Alert with this check-in"})]}),f&&e.jsxs("div",{className:"flex-col gap-sm",style:{marginTop:"0.75rem",paddingLeft:"0.5rem"},children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"text-secondary text-sm",children:"Severity"}),e.jsx("div",{className:"flex-center gap-sm mt-1",children:["LOW","MED","HIGH"].map(l=>e.jsx("button",{type:"button",className:`btn btn-sm ${L===l?l==="HIGH"?"btn-danger":l==="MED"?"btn-secondary":"btn-success":"btn-ghost"}`,onClick:()=>T(l),children:l},l))})]}),e.jsxs("label",{className:"mood-company-checkbox",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:l=>{F(l.target.checked),l.target.checked&&M(new Set)}}),e.jsx("span",{className:"text-secondary text-sm",children:"Broadcast to all buddies"})]}),!v&&t.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-secondary text-sm",style:{display:"block",marginBottom:"0.4rem"},children:"Or select specific buddies:"}),e.jsx("div",{className:"flex-col gap-xs",children:t.map(l=>e.jsxs("label",{className:"mood-company-checkbox",children:[e.jsx("input",{type:"checkbox",checked:w.has(l.id),onChange:()=>I(l.id)}),e.jsxs("span",{className:"text-sm",children:[l.name," ",e.jsxs("span",{className:"text-muted text-xs",children:["(",l.email,")"]})]})]},l.id))})]}),!v&&w.size===0&&e.jsx("p",{className:"text-muted text-xs",children:"No buddies selected â€” SOS will auto-select the best available buddies."})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:N,children:N?"Submitting...":f?"Submit Check-in + Send SOS":"Submit Check-in"})]})]})}const V=[{value:"AVAILABLE",label:"Available",dotClass:"status-dot-available",activeClass:"presence-btn-available-active"},{value:"BUSY",label:"Busy",dotClass:"status-dot-busy",activeClass:"presence-btn-busy-active"},{value:"OFFLINE",label:"Offline",dotClass:"status-dot-offline",activeClass:"presence-btn-offline-active"}];function me({onUpdated:s}){const[t,d]=a.useState("OFFLINE"),[i,h]=a.useState("OFFLINE"),[g,x]=a.useState(!1),[c,u]=a.useState(!0),[S,C]=a.useState(null),[N,y]=a.useState(!1),p=i!==t;a.useEffect(()=>{Z().then(m=>{const f=m.status;d(f),h(f)}).catch(()=>{}).finally(()=>u(!1))},[]);async function o(){x(!0),C(null);try{await q(i),d(i),s==null||s(i),y(!0),setTimeout(()=>y(!1),2e3)}catch(m){C(m instanceof Error?m.message:"Failed to update")}finally{x(!1)}}const b=V.find(m=>m.value===i);return c?e.jsx("div",{className:"card mb-4",children:e.jsx("p",{className:"text-secondary text-sm",children:"Loading status..."})}):e.jsxs("div",{className:"card mb-4",children:[e.jsxs("div",{className:"flex-between mb-4",children:[e.jsxs("div",{className:"flex-center gap-sm",children:[e.jsx("h3",{className:"heading-sm",children:"My Status"}),e.jsx("span",{className:`status-dot ${(b==null?void 0:b.dotClass)??"status-dot-offline"}`})]}),e.jsx("span",{className:"text-secondary text-sm",children:b==null?void 0:b.label})]}),e.jsx("div",{className:"presence-options",children:V.map(m=>{const f=i===m.value;return e.jsxs("button",{type:"button",className:`presence-btn ${f?m.activeClass:""}`,onClick:()=>h(m.value),disabled:g,children:[e.jsx("span",{className:`status-dot ${m.dotClass}`}),e.jsx("span",{className:"presence-btn-label",children:m.label})]},m.value)})}),p&&e.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:o,disabled:g,children:g?"Saving...":N?"Saved!":"Submit"}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--color-warning)"},children:"Unsaved â€” click Submit to apply"})]}),S&&e.jsx("p",{className:"text-danger text-sm mt-3",children:S})]})}const Y="vetbridge_location";function ue(){try{const s=localStorage.getItem(Y);if(!s)return null;const t=JSON.parse(s);if(t&&typeof t.lat=="number"&&typeof t.lng=="number"&&t.address)return t}catch{}return null}function B(s){try{localStorage.setItem(Y,JSON.stringify(s))}catch{}}function he(){return new Promise((s,t)=>{let d=!1,i=0;const h=2;function g(c){d||(d=!0,s(c))}function x(c){if(!d){if(c.code===c.PERMISSION_DENIED){d=!0,t(c);return}i++,i>=h&&(d=!0,t(c))}}navigator.geolocation.getCurrentPosition(g,x,{enableHighAccuracy:!1,timeout:1e4,maximumAge:3e5}),navigator.geolocation.getCurrentPosition(g,x,{enableHighAccuracy:!0,timeout:2e4,maximumAge:3e5})})}async function xe(){const s=new AbortController,t=setTimeout(()=>s.abort(),8e3);try{const d=await fetch("https://ipapi.co/json/",{signal:s.signal});if(!d.ok)throw new Error("IP geolocation request failed");const i=await d.json();if(typeof i.latitude=="number"&&typeof i.longitude=="number"){const h=[i.city,i.region,i.country_name].filter(Boolean).join(", ");return{lat:i.latitude,lng:i.longitude,address:h}}throw new Error("No coordinates in IP response")}finally{clearTimeout(t)}}async function ge(){let s=!1;if(navigator.geolocation)try{const t=await Promise.race([he(),new Promise((d,i)=>setTimeout(()=>i(new Error("_timeout_")),12e3))]);return{lat:t.coords.latitude,lng:t.coords.longitude}}catch(t){t instanceof GeolocationPositionError&&t.code===t.PERMISSION_DENIED&&(s=!0)}try{return{...await xe(),approximate:!0}}catch{throw s?new Error("Location permission denied. Please allow location access in your browser settings, or type your address above."):new Error("Could not detect your location. Please type your address above.")}}function pe({onUpdated:s}){const[t]=a.useState(()=>ue()),[d,i]=a.useState((t==null?void 0:t.address)??""),[h,g]=a.useState([]),[x,c]=a.useState(!1),[u,S]=a.useState(t?{lat:t.lat,lng:t.lng}:null),[C,N]=a.useState(t?{lat:t.lat,lng:t.lng}:null),[y,p]=a.useState((t==null?void 0:t.address)??""),[o,b]=a.useState(!1),[m,f]=a.useState(!1),[D,L]=a.useState(null),[T,v]=a.useState(!1),[F,w]=a.useState(!1),[M,I]=a.useState(null),[G,l]=a.useState(!t);a.useEffect(()=>{if(t){l(!1);return}let n=!1;async function j(){try{const k=H();if(!k)return;const r=await ee(k);if(n)return;if(r.latitude!=null&&r.longitude!=null){const P={lat:r.latitude,lng:r.longitude};S(P),N(P);try{const A=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${r.latitude}&lon=${r.longitude}&format=json`,{headers:{"Accept-Language":"en"}});if(n)return;if(A.ok){const R=(await A.json()).display_name||`${r.latitude.toFixed(4)}, ${r.longitude.toFixed(4)}`;p(R),i(R),B({lat:r.latitude,lng:r.longitude,address:R})}else{const $=`${r.latitude.toFixed(4)}, ${r.longitude.toFixed(4)}`;p($),i($),B({lat:r.latitude,lng:r.longitude,address:$})}}catch{if(n)return;const A=`${r.latitude.toFixed(4)}, ${r.longitude.toFixed(4)}`;p(A),i(A),B({lat:r.latitude,lng:r.longitude,address:A})}}}catch{}finally{n||l(!1)}}return j(),()=>{n=!0}},[]);async function E(n){i(n),v(!1),I(null),p(""),c(!0);const j=await se(n);g(j),c(!1)}function O(n){i(n.display_name),p(n.display_name),g([]),S({lat:n.lat,lng:n.lon}),L(null),I(null),v(!1),w(!0)}async function J(){f(!0),L(null),I(null),v(!1);try{const n=await ge(),{lat:j,lng:k}=n;S({lat:j,lng:k});let r="";if(n.address)r=n.address;else try{const P=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${j}&lon=${k}&format=json`,{headers:{"Accept-Language":"en"}});P.ok?r=(await P.json()).display_name||`${j.toFixed(4)}, ${k.toFixed(4)}`:r=`${j.toFixed(4)}, ${k.toFixed(4)}`}catch{r=`${j.toFixed(4)}, ${k.toFixed(4)}`}p(r),i(r);try{await W(j,k),N({lat:j,lng:k}),v(!0),w(!1),B({lat:j,lng:k,address:r}),s==null||s()}catch{w(!0)}n.approximate&&I("Location detected approximately via your network. You can refine it using the address search above.")}catch(n){L(n instanceof Error?n.message:"Auto-detect failed. Please type your address above.")}finally{f(!1)}}async function _(){if(u){b(!0),L(null),I(null);try{await W(u.lat,u.lng),N(u),v(!0),w(!1),B({lat:u.lat,lng:u.lng,address:y}),s==null||s()}catch(n){L(n instanceof Error?n.message:"Failed to update location")}finally{b(!1)}}}return G?e.jsxs("div",{className:"card mb-4",children:[e.jsx("h3",{className:"heading-sm mb-3",children:"My Location"}),e.jsx("p",{className:"text-muted text-sm",children:"Loading saved location..."})]}):e.jsxs("div",{className:"card mb-4",children:[e.jsx("h3",{className:"heading-sm mb-4",children:"My Location"}),C&&y&&!T&&e.jsx("div",{className:"location-current-badge mb-4",children:e.jsx("span",{className:"text-sm",children:y.split(",").slice(0,3).join(", ")})}),e.jsxs("div",{className:"input-group mb-3 relative",children:[e.jsx("label",{children:"Search Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:`input ${T?"location-input-success":F?"location-input-dirty":""}`,value:d,onChange:n=>E(n.target.value),placeholder:"Type city, ZIP code, or address to update..."}),x&&e.jsx("span",{className:"location-search-indicator text-muted text-xs",children:"Searching..."})]})]}),h.length>0&&e.jsx("div",{className:"location-suggestions-dropdown mb-3",children:h.map((n,j)=>e.jsxs("button",{type:"button",className:"location-suggestion-item",onClick:()=>O(n),children:[e.jsx("span",{className:"location-suggestion-primary",children:n.display_name.split(",")[0]}),e.jsx("span",{className:"text-muted text-xs",children:n.display_name.includes(",")?", "+n.display_name.split(",").slice(1,3).join(",").trim():""})]},j))}),e.jsxs("div",{className:"flex-between gap-sm mb-3",style:{flexWrap:"wrap"},children:[e.jsxs("button",{type:"button",className:"btn btn-ghost",onClick:J,disabled:m,children:[e.jsx("span",{children:"ðŸ“"}),m?"Detecting...":"Auto-detect"]}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:_,disabled:!F||o||!u,children:o?"Saving...":"Save Location"})]}),F&&u&&e.jsx("p",{className:"text-warning text-sm mt-2",children:'Unsaved changes â€” click "Save Location" to confirm.'}),T&&u&&e.jsxs("p",{className:"text-success text-sm mt-2",children:["Location saved: ",y?y.split(",").slice(0,2).join(", "):`${u.lat.toFixed(4)}, ${u.lng.toFixed(4)}`]}),D&&e.jsx("p",{className:"text-danger text-sm mt-2",children:D}),M&&e.jsx("p",{className:"text-muted text-sm mt-2",style:{color:"#b8860b"},children:M})]})}function be(s){switch(s){case"AVAILABLE":return"status-dot-available";case"BUSY":return"status-dot-busy";default:return"status-dot-offline"}}function fe(s){switch(s){case"AVAILABLE":return"badge-success";case"BUSY":return"badge-warning";default:return""}}function ye(){const[s,t]=a.useState([]),[d,i]=a.useState(!0),[h,g]=a.useState(null);async function x(){g(null),i(!0);try{const c=await X(10);t(c)}catch(c){g(c instanceof Error?c.message:"Failed to load nearby buddies")}finally{i(!1)}}return a.useEffect(()=>{x()},[]),d?e.jsx("p",{className:"text-secondary text-sm",children:"Loading nearby buddies..."}):h?e.jsx("div",{className:"alert alert-danger text-sm",children:h}):s.length===0?e.jsx("p",{className:"text-muted text-sm",children:"No accepted buddies found."}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex-between mb-4",children:[e.jsx("span",{className:"text-muted text-xs",children:"Ranked by availability, trust, and distance"}),e.jsx("button",{type:"button",className:"btn btn-ghost btn-sm",onClick:x,children:"Refresh"})]}),e.jsx("div",{className:"flex-col gap-sm",children:s.map((c,u)=>e.jsx("div",{className:"card card-hover buddy-card",children:e.jsxs("div",{className:"buddy-card-inner",children:[e.jsxs("span",{className:"buddy-rank text-muted",children:["#",u+1]}),e.jsx("span",{className:`status-dot ${be(c.presence_status)}`}),e.jsxs("div",{className:"buddy-info",children:[e.jsx("span",{className:"buddy-name",children:c.buddy_name}),e.jsxs("span",{className:"text-muted text-xs",children:[c.buddy_email," Â· trust ",c.trust_level,"/5"]})]}),e.jsxs("div",{className:"buddy-meta",children:[e.jsx("span",{className:`badge badge-sm ${fe(c.presence_status)}`,children:c.presence_status}),c.distance_km!==null&&e.jsxs("span",{className:"text-muted text-xs",children:[c.distance_km<1?"<1":Math.round(c.distance_km)," km"]})]})]})},c.buddy_id))})]})}function ve(){const[s,t]=a.useState([]),[d,i]=a.useState([]),[h,g]=a.useState(!0),[x,c]=a.useState(""),[u,S]=a.useState(""),[C,N]=a.useState(null);async function y(){N(null);try{const o=H();if(!o){N("No token found. Please log in again."),g(!1);return}const b=await te(o);c(b.role),S(b.full_name);const[m,f]=await Promise.all([ne(7),U()]);t(m),i(f)}catch(o){N(o instanceof Error?o.message:"Failed to load dashboard. Your session may have expired â€” please log in again."),t([]),i([])}finally{g(!1)}}a.useEffect(()=>{y()},[]);const p=d.filter(o=>o.status==="ACCEPTED").map(o=>({id:o.buddy_id,name:o.other_name||o.other_email,email:o.other_email}));return p.length>0&&fetch("http://127.0.0.1:7242/ingest/ea529403-4157-4bb2-8989-ab1b42396ecc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:"Dashboard.tsx:buddyOptions",message:"buddyOptions built",data:{role:x,buddyOptions:p.map(o=>({id:o.id,name:o.name})),rawLinks:d.filter(o=>o.status==="ACCEPTED").map(o=>({veteran_id:o.veteran_id,buddy_id:o.buddy_id}))},timestamp:Date.now(),hypothesisId:"H2"})}).catch(()=>{}),h?e.jsxs("div",{className:"page-container animate-in",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"loading-shimmer skeleton-heading mb-4"}),e.jsx("div",{className:"loading-shimmer skeleton-text"})]}),e.jsxs("div",{className:"grid-3 mb-8",children:[e.jsx("div",{className:"card loading-shimmer skeleton-card"}),e.jsx("div",{className:"card loading-shimmer skeleton-card"}),e.jsx("div",{className:"card loading-shimmer skeleton-card"})]}),e.jsx("div",{className:"card loading-shimmer skeleton-card mb-6"}),e.jsx("div",{className:"card loading-shimmer skeleton-card"})]}):e.jsxs("div",{className:"page-container",children:[e.jsxs("div",{className:"page-header animate-in",children:[e.jsxs("h1",{className:"heading-xl",children:["Welcome",u?", ":"",u&&e.jsx("span",{className:"text-gradient",children:u})]}),e.jsx("p",{className:"text-secondary text-lg mt-2",children:"VetBridge â€” Veteran Buddy Matching"})]}),C&&e.jsx("div",{className:"alert alert-danger animate-in mb-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"mb-2",children:C}),e.jsx("a",{href:"/login",className:"btn btn-ghost btn-sm",children:"Go to Login"})]})}),x&&e.jsxs("section",{className:"card mb-6 animate-in animate-in-delay-1",children:[e.jsx("h2",{className:"heading-md mb-4",children:"Status & Location"}),e.jsxs("div",{className:"flex-col gap-md",children:[e.jsx(me,{}),e.jsx(pe,{})]})]}),x==="veteran"&&e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"card mb-6 animate-in animate-in-delay-2",children:[e.jsx("h2",{className:"heading-md mb-2",children:"Nearby Buddies"}),e.jsx("p",{className:"text-secondary text-sm mb-4",children:"These are the buddies who will be notified during SOS"}),e.jsx(ye,{})]}),e.jsxs("section",{className:"card mb-6 animate-in animate-in-delay-3",children:[e.jsx("h2",{className:"heading-md mb-4",children:"Mood Check-in"}),e.jsx(de,{onSubmitted:y,buddies:p}),e.jsx("hr",{className:"divider"}),e.jsx("h3",{className:"heading-sm mb-3",children:"Recent check-ins (last 7)"}),s.length===0?e.jsx("p",{className:"text-muted text-sm",children:"No check-ins yet. Submit your first one above."}):e.jsx("div",{className:"flex-col gap-sm",children:s.map(o=>e.jsx(oe,{checkin:o},o.id))})]})]}),x!=="veteran"&&x&&e.jsx("div",{className:"card animate-in animate-in-delay-1",children:e.jsx("p",{className:"text-secondary",children:"Mood check-ins and SOS are available for veterans."})})]})}export{ve as default};
