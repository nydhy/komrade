import{r as s,h as N,i as f,j as e,L as w,s as y,u as S}from"./index-D52GenFk.js";import{l as E}from"./auth-CHILJdX7.js";function P(){var m,h;const[r,u]=s.useState(""),[i,p]=s.useState(""),[a,x]=s.useState(!1),[l,o]=s.useState(""),[c,d]=s.useState(!1),g=N(),b=((h=(m=f().state)==null?void 0:m.from)==null?void 0:h.pathname)??"/";async function j(t){t.preventDefault(),o(""),d(!0);try{const v=await E({email:r,password:i});y(v.access_token);try{await S("AVAILABLE")}catch{}g(b,{replace:!0})}catch(n){o(n instanceof Error?n.message:"Login failed")}finally{d(!1)}}return e.jsx("div",{className:"ambient-bg flex-center",style:{minHeight:"100vh"},children:e.jsxs("div",{className:"card glow-border animate-in",style:{width:"100%",maxWidth:440},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"heading-xl text-gradient mb-2",children:"VetBridge"}),e.jsx("p",{className:"text-secondary",children:"Welcome back to the veteran support network"})]}),e.jsx("hr",{className:"divider"}),e.jsx("h2",{className:"heading-md text-center mb-6",children:"Sign in to your account"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"input-group mb-4",children:[e.jsx("label",{htmlFor:"login-email",children:"Email Address"}),e.jsx("input",{id:"login-email",type:"email",value:r,onChange:t=>u(t.target.value),placeholder:"john@example.com",required:!0,autoComplete:"email",className:"input"})]}),e.jsxs("div",{className:"input-group mb-6",children:[e.jsx("label",{htmlFor:"login-password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"login-password",type:a?"text":"password",value:i,onChange:t=>p(t.target.value),placeholder:"Enter your password",required:!0,autoComplete:"current-password",className:"input",style:{paddingRight:"4rem"}}),e.jsx("button",{type:"button",onClick:()=>x(!a),className:"btn btn-ghost btn-sm absolute",style:{right:4,top:"50%",transform:"translateY(-50%)"},children:a?"Hide":"Show"})]})]}),l&&e.jsx("div",{className:"alert alert-danger mb-4 animate-in",children:e.jsx("span",{children:l})}),e.jsx("button",{type:"submit",disabled:c,className:"btn btn-primary btn-lg w-full",children:c?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("hr",{className:"divider"}),e.jsxs("p",{className:"text-secondary text-sm",children:["Don't have an account?"," ",e.jsx(w,{to:"/register",className:"text-gradient",style:{fontWeight:600},children:"Create one"})]})]})]})})}export{P as default};
