import{r as t,j as e,g as N}from"./index-BjFXoSI1.js";import{a as g,u as v}from"./auth-CXLfW215.js";function S(){const[a,r]=t.useState(null),[f,h]=t.useState(!0),[c,o]=t.useState(!1),[d,l]=t.useState(null),[p,i]=t.useState(!1),[m,u]=t.useState("");t.useEffect(()=>{async function n(){try{const s=N();if(!s)return;const x=await g(s);r(x),u(x.full_name)}catch(s){l(s instanceof Error?s.message:"Failed to load profile")}finally{h(!1)}}n()},[]);async function j(n){n.preventDefault(),o(!0),l(null),i(!1);try{const s=await v({full_name:m||void 0});r(s),i(!0),setTimeout(()=>i(!1),3e3)}catch(s){l(s instanceof Error?s.message:"Failed to save profile")}finally{o(!1)}}return f?e.jsx("div",{className:"page-container flex-center",style:{minHeight:"40vh"},children:e.jsx("p",{className:"text-secondary",children:"Loading profile..."})}):e.jsxs("div",{className:"page-container page-container-narrow",children:[e.jsxs("div",{className:"animate-in mb-8",children:[e.jsx("h1",{className:"heading-lg mb-2",children:"My Profile"}),e.jsx("p",{className:"text-muted",children:"Update your personal information"})]}),d&&e.jsx("div",{className:"alert alert-danger animate-in mb-4",children:d}),p&&e.jsx("div",{className:"alert alert-success animate-in mb-4",children:"Profile saved successfully."}),e.jsxs("form",{onSubmit:j,className:"flex-col gap-lg",children:[e.jsxs("section",{className:"card animate-in animate-in-delay-1",children:[e.jsx("h2",{className:"heading-md mb-4",children:"Account"}),e.jsx("div",{className:"divider mb-4"}),e.jsxs("div",{className:"profile-info-grid",children:[e.jsx("span",{className:"text-secondary text-sm",children:"Email"}),e.jsx("span",{className:"text-sm",children:a==null?void 0:a.email}),e.jsx("span",{className:"text-secondary text-sm",children:"Role"}),e.jsx("span",{className:"text-sm",style:{textTransform:"capitalize"},children:a==null?void 0:a.role}),e.jsx("span",{className:"text-secondary text-sm",children:"Joined"}),e.jsx("span",{className:"text-sm",children:a!=null&&a.created_at?new Date(a.created_at).toLocaleDateString():""})]})]}),e.jsxs("section",{className:"card animate-in animate-in-delay-2",children:[e.jsx("h2",{className:"heading-md mb-4",children:"Personal Info"}),e.jsx("div",{className:"divider mb-4"}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("input",{type:"text",className:"input",value:m,onChange:n=>u(n.target.value),placeholder:"Your full name"})]})]}),e.jsx("div",{className:"animate-in animate-in-delay-3",children:e.jsx("button",{type:"submit",className:"btn btn-primary btn-lg w-full",disabled:c,children:c?"Saving...":"Save Profile"})})]})]})}export{S as default};
